<div class="container col-md-6">
  <h1>Listing scores</h1>

  <% if !(@evaluation_instances.course.students.empty?) %>
    <%= simple_form_for @evaluation_instances, 
                            url: course_evaluation_instance_upload_path(@evaluation_instances.course, @evaluation_instances), 
                            method: :patch do |f| %>
      <div class="table-responsive col-md-12">
        <table class="table text-center">
          <thead>
            <th>Student</th>
            <th>Score</th>
          </thead>
          <tbody>
              <%= f.fields_for :scores, @evaluation_instances.scores do |score| %>
              <tr>
                <td>
                  <%= score.object.student.summary %>
                </td>
                <td>
                  <%= score.input :score, label: false, :error => false  %>

                  <br>
                  <% if score.object.errors.any? %>
                    <div id="error_explanation" class="alert alert-danger">
                      <h6><%= pluralize(score.object.errors.count, "error") %> prohibited this student from being saved:</h6>
                      <ul>
                        <% score.object.errors.full_messages.each do |msg| %>
                          <li class="font-italic"><%= msg %></li>
                        <% end %>
                      </ul>
                    </div>
                  <% end %>

                  <%= score.hidden_field :student_id %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
      <%= f.button :submit, "Upload", class: "btn btn-primary" %>
    <% end %>
  <% end %>
  <br>
  <%= link_to 'Back', course_evaluation_instances_path(@evaluation_instances.course), :class => "btn btn-secondary" %>
</div>
